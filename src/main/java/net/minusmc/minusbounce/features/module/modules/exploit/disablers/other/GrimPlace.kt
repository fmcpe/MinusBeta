package net.minusmc.minusbounce.features.module.modules.exploit.disablers.other

import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement
import net.minusmc.minusbounce.event.PacketEvent
import net.minusmc.minusbounce.features.module.modules.exploit.disablers.DisablerMode
import net.minusmc.minusbounce.utils.ClientUtils

class GrimPlace : DisablerMode("GrimPlace") {
    override fun onPacket(event: PacketEvent) {
        val packet = event.packet
        if(packet is C08PacketPlayerBlockPlacement && packet.placedBlockDirection in 0..5){
            event.cancelEvent()
            mc.netHandler.addToSendQueue(
                C08PacketPlayerBlockPlacement(
                    packet.position,
                    6 + packet.placedBlockDirection * 7,
                    packet.stack,
                    packet.placedBlockOffsetX,
                    packet.placedBlockOffsetY,
                    packet.placedBlockOffsetZ
                )
            )

            ClientUtils.displayChatMessage("Modify Place Packet")
        }
    }
}